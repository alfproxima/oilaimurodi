<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Семейное дерево</title>

    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 20px;
            background-color: #f4f4f4;
            text-align: center;
        }

        h1 {
            color: #333;
        }

        #tree-container {
            position: relative;
            display: flex;
            justify-content: center;
            margin-top: 50px;
        }

        .node {
            border: 2px solid #ccc;
            border-radius: 50%;
            padding: 10px;
            width: 100px;
            height: 100px;
            background-color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            position: absolute;
        }

        .node.male {
            background-color: #add8e6;
        }

        .node.female {
            background-color: #ffb6c1;
        }

        .line {
            position: absolute;
            width: 2px;
            background-color: #000;
        }

        .add-form {
            margin-top: 30px;
        }

        .add-form input, .add-form select, .add-form button {
            padding: 10px;
            margin: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }

        .add-form button {
            background-color: #28a745;
            color: white;
            cursor: pointer;
        }

        .add-form button:hover {
            background-color: #218838;
        }
    </style>
</head>
<body>

<h1>Семейное Дерево</h1>

<div id="tree-container"></div>

<div class="add-form">
    <h3>Добавить родственника</h3>
    <input type="text" id="name" placeholder="Имя" />
    <select id="gender">
        <option value="male">Мужчина</option>
        <option value="female">Женщина</option>
    </select>
    <input type="text" id="parentName" placeholder="Имя родителя" />
    <button onclick="addPerson()">Добавить</button>
</div>

<script>
    let treeData = [];

    function addPerson() {
        const name = document.getElementById('name').value;
        const gender = document.getElementById('gender').value;
        const parentName = document.getElementById('parentName').value;

        if (!name) {
            alert('Введите имя!');
            return;
        }

        const person = {
            name: name,
            gender: gender,
            parent: parentName || null
        };

        treeData.push(person);
        updateTree();
    }

    function updateTree() {
        const container = document.getElementById('tree-container');
        container.innerHTML = '';  // Очистка контейнера

        let parentPositions = {};

        treeData.forEach((person, index) => {
            const node = document.createElement('div');
            node.classList.add('node');
            node.classList.add(person.gender === 'male' ? 'male' : 'female');
            node.innerText = person.name;
            node.style.top = `${index * 120}px`;
            node.style.left = `${index * 150}px`;
            container.appendChild(node);

            // Сохранение позиции родителя
            if (!parentPositions[person.name]) {
                parentPositions[person.name] = { top: index * 120, left: index * 150 };
            }

            // Рисование линий к родителям
            if (person.parent) {
                const parentPosition = parentPositions[person.parent];
                if (parentPosition) {
                    const line = document.createElement('div');
                    line.classList.add('line');
                    const lineHeight = Math.abs(parentPosition.top - index * 120);
                    line.style.height = `${lineHeight}px`;
                    line.style.top = `${Math.min(parentPosition.top, index * 120)}px`;
                    line.style.left = `${(index * 150) + 50}px`;
                    container.appendChild(line);
                }
            }
        });
    }
</script>

</body>
</html>
